<!DOCTYPE html>
<html lang="es-CL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConAdmin Chile - Administración de Condominios</title>
    <meta name="description" content="Sistema de administración de condominios para Chile">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/additional.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>Cargando ConAdmin Chile...</p>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">
                    <i data-lucide="building-2"></i>
                    <h1>ConAdmin Chile</h1>
                </div>
                <p>Sistema de Administración de Condominios</p>
            </div>
            
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username">Usuario</label>
                    <input type="text" id="username" name="username" required autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                
                <button type="submit" class="btn btn-primary btn-login">
                    <i data-lucide="log-in"></i>
                    Iniciar Sesión
                </button>
                
                <div class="login-info">
                    <p><strong>Usuario por defecto:</strong> admin</p>
                    <p><strong>Contraseña por defecto:</strong> condo123</p>
                </div>
            </form>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay"></div>

    <!-- Main Layout -->
    <div class="layout" id="main-layout" style="display: none;">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i data-lucide="building-2"></i>
                    <h1>ConAdmin</h1>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i data-lucide="menu"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-section="dashboard">
                            <i data-lucide="layout-dashboard"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="residents">
                            <i data-lucide="users"></i>
                            <span>Residentes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="finances">
                            <i data-lucide="dollar-sign"></i>
                            <span>Finanzas</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="maintenance">
                            <i data-lucide="wrench"></i>
                            <span>Mantenciones</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="communications">
                            <i data-lucide="message-circle"></i>
                            <span>Comunicaciones</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="common-areas">
                            <i data-lucide="calendar"></i>
                            <span>Áreas Comunes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="reports">
                            <i data-lucide="file-text"></i>
                            <span>Reportes</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i data-lucide="user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">Admin Principal</span>
                        <span class="user-role">Administrador</span>
                    </div>
                </div>
                <button id="logout-btn" class="btn btn-logout" title="Cerrar Sesión">
                    <i data-lucide="log-out"></i>
                    <span>Cerrar Sesión</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobile-menu-btn">
                        <i data-lucide="menu"></i>
                    </button>
                    <h2 class="page-title" id="page-title">Dashboard</h2>
                </div>
                
                <div class="header-right">
                    <button class="header-btn" id="notification-btn">
                        <i data-lucide="bell"></i>
                        <span class="notification-badge" id="notification-badge">3</span>
                    </button>
                    <button class="header-btn" id="settings-btn">
                        <i data-lucide="settings"></i>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area" id="content-area">
                <!-- Dashboard Section -->
                <section id="dashboard-section" class="content-section active">
                    <div class="dashboard-grid">
                        <!-- KPI Cards -->
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-icon">
                                    <i data-lucide="dollar-sign"></i>
                                </div>
                                <div class="kpi-content">
                                    <h3 class="kpi-value" id="kpi-monthly-fees">$1.250.000</h3>
                                    <p class="kpi-label">Gastos Comunes del Mes</p>
                                    <span class="kpi-change positive">+12% vs mes anterior</span>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-icon">
                                    <i data-lucide="users"></i>
                                </div>
                                <div class="kpi-content">
                                    <h3 class="kpi-value" id="kpi-total-residents">145</h3>
                                    <p class="kpi-label">Total Residentes</p>
                                    <span class="kpi-change neutral">95% ocupación</span>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-icon">
                                    <i data-lucide="alert-triangle"></i>
                                </div>
                                <div class="kpi-content">
                                    <h3 class="kpi-value" id="kpi-pending-payments">8</h3>
                                    <p class="kpi-label">Pagos Pendientes</p>
                                    <span class="kpi-change negative">$240.000 CLP</span>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-icon">
                                    <i data-lucide="wrench"></i>
                                </div>
                                <div class="kpi-content">
                                    <h3 class="kpi-value" id="kpi-pending-maintenance">3</h3>
                                    <p class="kpi-label">Mantenciones Pendientes</p>
                                    <span class="kpi-change warning">1 urgente</span>
                                </div>
                            </div>
                        </div>

                        <!-- Charts and Lists -->
                        <div class="dashboard-secondary">
                            <div class="chart-card">
                                <h3>Resumen Financiero - Últimos 6 Meses</h3>
                                <div class="chart-container">
                                    <canvas id="financial-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="list-card">
                                <h3>Próximas Reservas</h3>
                                <div class="reservation-list" id="reservation-list">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Residents Section -->
                <section id="residents-section" class="content-section">
                    <div class="section-header">
                        <h2>Gestión de Residentes</h2>
                        <button class="btn btn-primary" id="add-resident-btn">
                            <i data-lucide="plus"></i>
                            Agregar Residente
                        </button>
                    </div>
                    
                    <div class="card">
                        <div class="filters">
                            <input type="text" id="resident-search" class="input" placeholder="Buscar por nombre, RUT o departamento">
                            <select id="resident-status-filter" class="select">
                                <option value="">Todos los estados</option>
                                <option value="propietario">Propietario</option>
                                <option value="arrendatario">Arrendatario</option>
                                <option value="vacant">Vacante</option>
                            </select>
                        </div>
                        
                        <div class="table-container">
                            <table class="table" id="residents-table">
                                <thead>
                                    <tr>
                                        <th>Departamento</th>
                                        <th>Nombre</th>
                                        <th>RUT</th>
                                        <th>Teléfono</th>
                                        <th>Estado</th>
                                        <th>Deuda</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="residents-table-body">
                                    <!-- Populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Finances Section -->
                <section id="finances-section" class="content-section">
                    <div class="section-header">
                        <h2>Gestión Financiera</h2>
                        <div class="header-actions">
                            <button class="btn btn-secondary" id="generate-report-btn">
                                <i data-lucide="file-text"></i>
                                Generar Reporte
                            </button>
                            <button class="btn btn-primary" id="add-payment-btn">
                                <i data-lucide="plus"></i>
                                Registrar Pago
                            </button>
                        </div>
                    </div>
                    
                    <div class="finances-grid">
                        <div class="card">
                            <h3>Gastos Comunes - Mes Actual</h3>
                            <div class="amount-input-group">
                                <input type="text" id="monthly-fees-input" class="input amount-input" placeholder="0" value="1.250.000">
                                <span class="currency">CLP</span>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>Estado de Pagos</h3>
                            <div class="payment-status-summary" id="payment-status-summary">
                                <div class="status-item">
                                    <span class="status-dot success"></span>
                                    <span>Al día: <strong>137</strong></span>
                                </div>
                                <div class="status-item">
                                    <span class="status-dot warning"></span>
                                    <span>Pendiente: <strong>8</strong></span>
                                </div>
                                <div class="status-item">
                                    <span class="status-dot error"></span>
                                    <span>Atrasado: <strong>0</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Historial de Pagos</h3>
                        <div class="table-container">
                            <table class="table" id="payments-table">
                                <thead>
                                    <tr>
                                        <th>Departamento</th>
                                        <th>Residente</th>
                                        <th>Monto</th>
                                        <th>Fecha Pago</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="payments-table-body">
                                    <!-- Populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Maintenance Section -->
                <section id="maintenance-section" class="content-section">
                    <div class="section-header">
                        <h2>Gestión de Mantenciones</h2>
                        <button class="btn btn-primary" id="add-maintenance-btn">
                            <i data-lucide="plus"></i>
                            Nueva Solicitud
                        </button>
                    </div>
                    
                    <div class="maintenance-filters">
                        <select id="maintenance-status-filter" class="select">
                            <option value="">Todos los estados</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="en_proceso">En Proceso</option>
                            <option value="completado">Completado</option>
                        </select>
                        <select id="maintenance-priority-filter" class="select">
                            <option value="">Todas las prioridades</option>
                            <option value="baja">Baja</option>
                            <option value="media">Media</option>
                            <option value="alta">Alta</option>
                            <option value="urgente">Urgente</option>
                        </select>
                    </div>
                    
                    <div class="maintenance-list" id="maintenance-list">
                        <!-- Populated by JavaScript -->
                    </div>
                </section>

                <!-- Communications Section -->
                <section id="communications-section" class="content-section">
                    <div class="section-header">
                        <h2>Comunicaciones</h2>
                        <button class="btn btn-primary" id="new-announcement-btn">
                            <i data-lucide="plus"></i>
                            Nuevo Aviso
                        </button>
                    </div>
                    
                    <div class="communications-grid">
                        <div class="card">
                            <h3>Avisos Activos</h3>
                            <div class="announcements-list" id="announcements-list">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>Enviar Comunicación</h3>
                            <form id="communication-form" class="form">
                                <div class="form-group">
                                    <label class="form-label">Destinatarios</label>
                                    <select class="select" id="communication-target">
                                        <option value="todos">Todos los Residentes</option>
                                        <option value="deuda">Con Deuda Pendiente</option>
                                        <option value="especifico">Residente Específico</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Asunto</label>
                                    <input type="text" class="input" id="communication-subject" placeholder="Asunto de la comunicación">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Mensaje</label>
                                    <textarea class="textarea" id="communication-message" rows="4" placeholder="Escribe tu mensaje aquí..."></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Enviar Comunicación</button>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- Common Areas Section -->
                <section id="common-areas-section" class="content-section">
                    <div class="section-header">
                        <h2>Reservas de Áreas Comunes</h2>
                        <button class="btn btn-primary" id="new-reservation-btn">
                            <i data-lucide="plus"></i>
                            Nueva Reserva
                        </button>
                    </div>
                    
                    <div class="areas-grid">
                        <div class="area-card">
                            <div class="area-header">
                                <i data-lucide="users"></i>
                                <h3>Salón Multiuso</h3>
                            </div>
                            <div class="area-status">
                                <span class="status-indicator available">Disponible</span>
                            </div>
                            <div class="area-schedule" id="salon-multiuso-schedule">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="area-card">
                            <div class="area-header">
                                <i data-lucide="flame"></i>
                                <h3>Quincho</h3>
                            </div>
                            <div class="area-status">
                                <span class="status-indicator available">Disponible</span>
                            </div>
                            <div class="area-schedule" id="quincho-schedule">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="area-card">
                            <div class="area-header">
                                <i data-lucide="waves"></i>
                                <h3>Piscina</h3>
                            </div>
                            <div class="area-status">
                                <span class="status-indicator available">Disponible</span>
                            </div>
                            <div class="area-schedule" id="piscina-schedule">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Reports Section -->
                <section id="reports-section" class="content-section">
                    <div class="section-header">
                        <h2>Reportes</h2>
                    </div>
                    
                    <div class="reports-grid">
                        <div class="card report-card">
                            <div class="report-icon">
                                <i data-lucide="file-text"></i>
                            </div>
                            <h3>Reporte Financiero</h3>
                            <p>Resumen completo de ingresos y gastos del condominio</p>
                            <button class="btn btn-primary" data-report="financial">Generar</button>
                        </div>
                        
                        <div class="card report-card">
                            <div class="report-icon">
                                <i data-lucide="users"></i>
                            </div>
                            <h3>Reporte de Residentes</h3>
                            <p>Lista completa de residentes y sus estados de pago</p>
                            <button class="btn btn-primary" data-report="residents">Generar</button>
                        </div>
                        
                        <div class="card report-card">
                            <div class="report-icon">
                                <i data-lucide="calendar"></i>
                            </div>
                            <h3>Reporte de Mantenciones</h3>
                            <p>Historial y estado de todas las mantenciones</p>
                            <button class="btn btn-primary" data-report="maintenance">Generar</button>
                        </div>
                        
                        <div class="card report-card">
                            <div class="report-icon">
                                <i data-lucide="building"></i>
                            </div>
                            <h3>Reporte General</h3>
                            <p>Resumen ejecutivo de todas las actividades</p>
                            <button class="btn btn-primary" data-report="general">Generar</button>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Resident Modal -->
    <div id="resident-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="resident-modal-title">Agregar Residente</h3>
                <button class="modal-close" data-modal="resident-modal">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="resident-form" class="modal-body form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Nombre Completo *</label>
                        <input type="text" class="input" id="resident-name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">RUT *</label>
                        <input type="text" class="input" id="resident-rut" placeholder="12.345.678-9" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Teléfono</label>
                        <input type="tel" class="input" id="resident-phone" placeholder="+56 9 1234 5678">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="input" id="resident-email">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Departamento *</label>
                        <input type="text" class="input" id="resident-apartment" placeholder="101" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estado</label>
                        <select class="select" id="resident-status">
                            <option value="propietario">Propietario</option>
                            <option value="arrendatario">Arrendatario</option>
                            <option value="vacant">Vacante</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Observaciones</label>
                    <textarea class="textarea" id="resident-notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-modal="resident-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Maintenance Modal -->
    <div id="maintenance-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="maintenance-modal-title">Nueva Solicitud de Mantención</h3>
                <button class="modal-close" data-modal="maintenance-modal">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="maintenance-form" class="modal-body form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Título *</label>
                        <input type="text" class="input" id="maintenance-title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prioridad</label>
                        <select class="select" id="maintenance-priority">
                            <option value="baja">Baja</option>
                            <option value="media">Media</option>
                            <option value="alta">Alta</option>
                            <option value="urgente">Urgente</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Departamento</label>
                        <input type="text" class="input" id="maintenance-apartment" placeholder="101">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Área Afectada</label>
                        <select class="select" id="maintenance-area">
                            <option value="comun">Áreas Comunes</option>
                            <option value="privada">Área Privada</option>
                            <option value="infraestructura">Infraestructura</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Descripción *</label>
                    <textarea class="textarea" id="maintenance-description" rows="4" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-modal="maintenance-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Solicitud</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Reservation Modal -->
    <div id="reservation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="reservation-modal-title">Nueva Reserva</h3>
                <button class="modal-close" data-modal="reservation-modal">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="reservation-form" class="modal-body form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Área Común *</label>
                        <select class="select" id="reservation-area" required>
                            <option value="salon-multiuso">Salón Multiuso</option>
                            <option value="quincho">Quincho</option>
                            <option value="piscina">Piscina</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Departamento *</label>
                        <input type="text" class="input" id="reservation-apartment" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Fecha *</label>
                        <input type="date" class="input" id="reservation-date" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Hora Inicio *</label>
                        <input type="time" class="input" id="reservation-start" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Hora Fin *</label>
                    <input type="time" class="input" id="reservation-end" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Propósito</label>
                    <input type="text" class="input" id="reservation-purpose" placeholder="Ej: Cumpleaños, reunión familiar">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-modal="reservation-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Reserva</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notifications-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Notificaciones</h3>
                <button class="modal-close" data-modal="notifications-modal">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notifications-list" id="notifications-list">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/components.js"></script>
    <script src="js/sections.js"></script>
    <script src="js/charts.js"></script>
</body>
</html>